storiz
======

L'idee: faire une plateforme de jeu via video / images cliquables / choix de reponses a la choicescript.

Iterations:
1- une page statique (tile) contenant une image et 3 textes statiques
2- les textes stockes en DB (Mongo)
3- Les infos de la tuile stockes en DB:

   Table: tiles

JSON built with: http://objgen.com/json

{
  "id": "1",
  "title": "Let's get dangerous",
  "text": "Hi, I'm Marie. How may I help you?",
  "picture": "receptionist.jpg",
  "choices": [
    {
      "text": "I have an appointment with HR",
      "to_tile": "2"
    },
    {
      "text": "I am the repairman, may I check your PC?",
      "to_tile": "3"
    },
    {
      "text": "May I use the bathroom?",
      "to_tile": "4"
    }
  ]
}

4- Ajout de videos: si le tag video est present, il prend la precedence sur le tag picture

5- Ajout de l'equipement

  Table: stuff

{
  "stuff": [
    {
      "key": "accessCard",
      "name": "Badge",
      "description": "Un badge d'acces de la societe AllSafe"
    },
    {
      "key": "usbKey",
      "name": "cle USB",
      "description": "Une cle USB contenant un PDF malicieux (CV de M Smith)"
    }
  ]
}

6- Ajout de conditions sur les transitions: un choix peut etre grise si l'objet necessaire manque

  "choices": [
    {
      "text": "I have an appointment with HR",
      "to_tile": "2",
      "requires" : "accessCard"
    },

7- Ajout de image maps

Depuis le site: https://www.image-map.net/

<!-- Image Map Generated by http://www.image-map.net/ -->
<img usemap="#image-map" src="crosswords.jpg">

<map name="image-map">
    <area shape="poly" coords="168,159,381,317,892,608,898,512,418,239,298,190,177,140" href="pencil" title="pencil" alt="pencil" target="">
    <area shape="poly" coords="2,496,256,378,355,553,37,719,3,714" href="eraser" title="eraser" alt="eraser" target="">
</map>

map: [
  {
    "shape": "poly",
    "coords": "168,159,381,317,892,608,898,512,418,239,298,190,177,140",
    "to_tile": "4"
  },
  {
    "shape": "poly",
    "coords": "2,496,256,378,355,553,37,719,3,714",
    "to_tile": "5"
  }
]



KNOWN BUGS & LIMITATIONS
========================


- only one 'required' item at the moment, should be replaced by an array

- There is no error message in case a non-implemented tile is being chosen

- CSS is desesperately needed

- An editor should be developed, for that I need to add user support, create an admin account, and let it edit / create tiles


TODO
====

- create user accounts, persist progression in DB (for scoring, storing history of visited tiles etc.)

- make a tile editor (possibly with direct upload of pictures / videos to folder /public)

- disable 'insecure' package of Meteor (and debug the subscriptions)

- make game hacking more complex: replace IDs with UUIDs, possibly dynamically generated for avoiding replay, namely by sniffing the to_tile of all three options and playing them one after the other, or for saving the key name of an item for a subsequent re-play in another game


HOW-TO RUN
==========

cd storiz
meteor npm install
meteor

DB debug: meteor mongo
